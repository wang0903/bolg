export const data = JSON.parse("{\"key\":\"v-87d57f00\",\"path\":\"/posts/k8s%E5%AD%A6%E4%B9%A0/2.html\",\"title\":\"traefik\",\"lang\":\"zh-CN\",\"frontmatter\":{\"icon\":\"pen-to-square\",\"category\":[\"Linux\"],\"tag\":[\"k8s\",\"Kubernetes\",\"traefik\"],\"star\":true,\"sticky\":true,\"description\":\"traefik traefik网络架构案例代码 traefik-deployment代码 apiVersion: v1 kind: ServiceAccount metadata: namespace: default name: traefik-ingress-controller --- kind: Deployment apiVersion: apps/v1 metadata: namespace: default name: traefik labels: app: traefik spec: replicas: 1 selector: matchLabels: app: traefik template: metadata: labels: app: traefik spec: hostNetwork: true dnsPolicy: ClusterFirstWithHostNet # 调整策略 serviceAccountName: traefik-ingress-controller containers: - name: traefik image: traefik:v2.9 args: - --api.insecure - --accesslog - --entrypoints.web.Address=:8000 - --entrypoints.websecure.Address=:4443 - --providers.kubernetescrd - --certificatesresolvers.myresolver.acme.tlschallenge - --certificatesresolvers.myresolver.acme.email=foo@you.com - --certificatesresolvers.myresolver.acme.storage=acme.json # Please note that this is the staging Let's Encrypt server. # Once you get things working, you should remove that whole line altogether. - --certificatesresolvers.myresolver.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory ports: - name: web containerPort: 8000 - name: websecure containerPort: 4443 - name: admin containerPort: 8080 # 修改为指定 运行 traefik controller 节点 nodeName: k8s-n4\",\"head\":[[\"meta\",{\"property\":\"og:url\",\"content\":\"https://github.com/posts/k8s%E5%AD%A6%E4%B9%A0/2.html\"}],[\"meta\",{\"property\":\"og:title\",\"content\":\"traefik\"}],[\"meta\",{\"property\":\"og:description\",\"content\":\"traefik traefik网络架构案例代码 traefik-deployment代码 apiVersion: v1 kind: ServiceAccount metadata: namespace: default name: traefik-ingress-controller --- kind: Deployment apiVersion: apps/v1 metadata: namespace: default name: traefik labels: app: traefik spec: replicas: 1 selector: matchLabels: app: traefik template: metadata: labels: app: traefik spec: hostNetwork: true dnsPolicy: ClusterFirstWithHostNet # 调整策略 serviceAccountName: traefik-ingress-controller containers: - name: traefik image: traefik:v2.9 args: - --api.insecure - --accesslog - --entrypoints.web.Address=:8000 - --entrypoints.websecure.Address=:4443 - --providers.kubernetescrd - --certificatesresolvers.myresolver.acme.tlschallenge - --certificatesresolvers.myresolver.acme.email=foo@you.com - --certificatesresolvers.myresolver.acme.storage=acme.json # Please note that this is the staging Let's Encrypt server. # Once you get things working, you should remove that whole line altogether. - --certificatesresolvers.myresolver.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory ports: - name: web containerPort: 8000 - name: websecure containerPort: 4443 - name: admin containerPort: 8080 # 修改为指定 运行 traefik controller 节点 nodeName: k8s-n4\"}],[\"meta\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"meta\",{\"property\":\"og:locale\",\"content\":\"zh-CN\"}],[\"meta\",{\"property\":\"article:author\",\"content\":\"蜉蝣\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"k8s\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"Kubernetes\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"traefik\"}],[\"script\",{\"type\":\"application/ld+json\"},\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"Article\\\",\\\"headline\\\":\\\"traefik\\\",\\\"image\\\":[\\\"\\\"],\\\"dateModified\\\":null,\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"蜉蝣\\\",\\\"url\\\":\\\"https://mister-hope.com\\\"}]}\"]]},\"headers\":[{\"level\":2,\"title\":\"traefik网络架构案例代码\",\"slug\":\"traefik网络架构案例代码\",\"link\":\"#traefik网络架构案例代码\",\"children\":[{\"level\":3,\"title\":\"traefik-deployment代码\",\"slug\":\"traefik-deployment代码\",\"link\":\"#traefik-deployment代码\",\"children\":[]},{\"level\":3,\"title\":\"traefik-service 代码\",\"slug\":\"traefik-service-代码\",\"link\":\"#traefik-service-代码\",\"children\":[]},{\"level\":3,\"title\":\"kubernetes-crd-rbac代码\",\"slug\":\"kubernetes-crd-rbac代码\",\"link\":\"#kubernetes-crd-rbac代码\",\"children\":[]},{\"level\":3,\"title\":\"kubernetes-crd-definition-v1代码\",\"slug\":\"kubernetes-crd-definition-v1代码\",\"link\":\"#kubernetes-crd-definition-v1代码\",\"children\":[]}]},{\"level\":2,\"title\":\"nginx配置traefik\",\"slug\":\"nginx配置traefik\",\"link\":\"#nginx配置traefik\",\"children\":[{\"level\":3,\"title\":\"nginx-deployment 代码\",\"slug\":\"nginx-deployment-代码\",\"link\":\"#nginx-deployment-代码\",\"children\":[]},{\"level\":3,\"title\":\"nginx-ingressroutes 代码\",\"slug\":\"nginx-ingressroutes-代码\",\"link\":\"#nginx-ingressroutes-代码\",\"children\":[]},{\"level\":3,\"title\":\"nginx-service 代码\",\"slug\":\"nginx-service-代码\",\"link\":\"#nginx-service-代码\",\"children\":[]}]},{\"level\":2,\"title\":\"whoiam 配置 traefik\",\"slug\":\"whoiam-配置-traefik\",\"link\":\"#whoiam-配置-traefik\",\"children\":[{\"level\":3,\"title\":\"whoiam-deployment 代码\",\"slug\":\"whoiam-deployment-代码\",\"link\":\"#whoiam-deployment-代码\",\"children\":[]},{\"level\":3,\"title\":\"whoiam-service 代码\",\"slug\":\"whoiam-service-代码\",\"link\":\"#whoiam-service-代码\",\"children\":[]},{\"level\":3,\"title\":\"whoiam-ingressroutes 代码\",\"slug\":\"whoiam-ingressroutes-代码\",\"link\":\"#whoiam-ingressroutes-代码\",\"children\":[]}]}],\"readingTime\":{\"minutes\":32.52,\"words\":9756},\"filePathRelative\":\"posts/k8s学习/2.md\",\"excerpt\":\"<h1> traefik</h1>\\n<h2> traefik网络架构案例代码</h2>\\n<h3> traefik-deployment代码</h3>\\n<div class=\\\"language-yaml line-numbers-mode\\\" data-ext=\\\"yml\\\"><pre class=\\\"language-yaml\\\"><code><span class=\\\"token key atrule\\\">apiVersion</span><span class=\\\"token punctuation\\\">:</span> v1\\n<span class=\\\"token key atrule\\\">kind</span><span class=\\\"token punctuation\\\">:</span> ServiceAccount\\n<span class=\\\"token key atrule\\\">metadata</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">namespace</span><span class=\\\"token punctuation\\\">:</span> default\\n  <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> traefik<span class=\\\"token punctuation\\\">-</span>ingress<span class=\\\"token punctuation\\\">-</span>controller\\n\\n<span class=\\\"token punctuation\\\">---</span>\\n<span class=\\\"token key atrule\\\">kind</span><span class=\\\"token punctuation\\\">:</span> Deployment\\n<span class=\\\"token key atrule\\\">apiVersion</span><span class=\\\"token punctuation\\\">:</span> apps/v1\\n<span class=\\\"token key atrule\\\">metadata</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">namespace</span><span class=\\\"token punctuation\\\">:</span> default\\n  <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> traefik\\n  <span class=\\\"token key atrule\\\">labels</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">app</span><span class=\\\"token punctuation\\\">:</span> traefik\\n\\n<span class=\\\"token key atrule\\\">spec</span><span class=\\\"token punctuation\\\">:</span>\\n  <span class=\\\"token key atrule\\\">replicas</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">1</span>\\n  <span class=\\\"token key atrule\\\">selector</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">matchLabels</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token key atrule\\\">app</span><span class=\\\"token punctuation\\\">:</span> traefik\\n  <span class=\\\"token key atrule\\\">template</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token key atrule\\\">metadata</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token key atrule\\\">labels</span><span class=\\\"token punctuation\\\">:</span>\\n        <span class=\\\"token key atrule\\\">app</span><span class=\\\"token punctuation\\\">:</span> traefik\\n    <span class=\\\"token key atrule\\\">spec</span><span class=\\\"token punctuation\\\">:</span>\\n      <span class=\\\"token key atrule\\\">hostNetwork</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean important\\\">true</span>\\n      <span class=\\\"token key atrule\\\">dnsPolicy</span><span class=\\\"token punctuation\\\">:</span> ClusterFirstWithHostNet     <span class=\\\"token comment\\\"># 调整策略</span>\\n      <span class=\\\"token key atrule\\\">serviceAccountName</span><span class=\\\"token punctuation\\\">:</span> traefik<span class=\\\"token punctuation\\\">-</span>ingress<span class=\\\"token punctuation\\\">-</span>controller\\n      <span class=\\\"token key atrule\\\">containers</span><span class=\\\"token punctuation\\\">:</span>\\n        <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> traefik\\n          <span class=\\\"token key atrule\\\">image</span><span class=\\\"token punctuation\\\">:</span> traefik<span class=\\\"token punctuation\\\">:</span>v2.9\\n          <span class=\\\"token key atrule\\\">args</span><span class=\\\"token punctuation\\\">:</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>api.insecure\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>accesslog\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>entrypoints.web.Address=<span class=\\\"token punctuation\\\">:</span><span class=\\\"token number\\\">8000</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>entrypoints.websecure.Address=<span class=\\\"token punctuation\\\">:</span><span class=\\\"token number\\\">4443</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>providers.kubernetescrd\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>certificatesresolvers.myresolver.acme.tlschallenge\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>certificatesresolvers.myresolver.acme.email=foo@you.com\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>certificatesresolvers.myresolver.acme.storage=acme.json\\n<span class=\\\"token comment\\\">#             Please note that this is the staging Let's Encrypt server.</span>\\n<span class=\\\"token comment\\\">#             Once you get things working, you should remove that whole line altogether.</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token punctuation\\\">-</span><span class=\\\"token punctuation\\\">-</span>certificatesresolvers.myresolver.acme.caserver=https<span class=\\\"token punctuation\\\">:</span>//acme<span class=\\\"token punctuation\\\">-</span>staging<span class=\\\"token punctuation\\\">-</span>v02.api.letsencrypt.org/directory\\n          <span class=\\\"token key atrule\\\">ports</span><span class=\\\"token punctuation\\\">:</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> web\\n              <span class=\\\"token key atrule\\\">containerPort</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">8000</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> websecure\\n              <span class=\\\"token key atrule\\\">containerPort</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">4443</span>\\n            <span class=\\\"token punctuation\\\">-</span> <span class=\\\"token key atrule\\\">name</span><span class=\\\"token punctuation\\\">:</span> admin\\n              <span class=\\\"token key atrule\\\">containerPort</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token number\\\">8080</span>\\n      <span class=\\\"token comment\\\"># 修改为指定 运行 traefik controller 节点</span>\\n      <span class=\\\"token key atrule\\\">nodeName</span><span class=\\\"token punctuation\\\">:</span> k8s<span class=\\\"token punctuation\\\">-</span>n4\\n\\n\\n</code></pre><div class=\\\"line-numbers\\\" aria-hidden=\\\"true\\\"><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div></div></div>\",\"autoDesc\":true}")

if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updatePageData) {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ data }) => {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  })
}
