export const data = JSON.parse("{\"key\":\"v-81021c84\",\"path\":\"/posts/k8s%E5%AD%A6%E4%B9%A0/4.html\",\"title\":\"项目实现jenkins+K8S部署\",\"lang\":\"zh-CN\",\"frontmatter\":{\"icon\":\"pen-to-square\",\"category\":[\"Linux\"],\"tag\":[\"k8s\",\"Kubernetes\",\"traefik\",\"kubesphere\",\"jenkins\"],\"star\":true,\"sticky\":true,\"description\":\"项目实现jenkins+K8S部署 一、安装kubekey #解压 tar -zxf kubekey-v3.1.2-linux-amd64.tar.gz #将解压出来的KK放到/usr/bin mv kk /usr/bin #安装时间同步 apt install ntpdate\",\"head\":[[\"meta\",{\"property\":\"og:url\",\"content\":\"https://github.com/posts/k8s%E5%AD%A6%E4%B9%A0/4.html\"}],[\"meta\",{\"property\":\"og:title\",\"content\":\"项目实现jenkins+K8S部署\"}],[\"meta\",{\"property\":\"og:description\",\"content\":\"项目实现jenkins+K8S部署 一、安装kubekey #解压 tar -zxf kubekey-v3.1.2-linux-amd64.tar.gz #将解压出来的KK放到/usr/bin mv kk /usr/bin #安装时间同步 apt install ntpdate\"}],[\"meta\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"meta\",{\"property\":\"og:locale\",\"content\":\"zh-CN\"}],[\"meta\",{\"property\":\"article:author\",\"content\":\"写代码的小辣椒\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"k8s\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"Kubernetes\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"traefik\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"kubesphere\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"jenkins\"}],[\"script\",{\"type\":\"application/ld+json\"},\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"Article\\\",\\\"headline\\\":\\\"项目实现jenkins+K8S部署\\\",\\\"image\\\":[\\\"\\\"],\\\"dateModified\\\":null,\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"写代码的小辣椒\\\",\\\"url\\\":\\\"https://mister-hope.com\\\"}]}\"]]},\"headers\":[{\"level\":2,\"title\":\"一、安装kubekey\",\"slug\":\"一、安装kubekey\",\"link\":\"#一、安装kubekey\",\"children\":[]},{\"level\":2,\"title\":\"二、安装k8s和kubesphere\",\"slug\":\"二、安装k8s和kubesphere\",\"link\":\"#二、安装k8s和kubesphere\",\"children\":[{\"level\":3,\"title\":\"1、单集群\",\"slug\":\"_1、单集群\",\"link\":\"#_1、单集群\",\"children\":[]},{\"level\":3,\"title\":\"1.1、关闭swap分区\",\"slug\":\"_1-1、关闭swap分区\",\"link\":\"#_1-1、关闭swap分区\",\"children\":[]},{\"level\":3,\"title\":\"2、多集群\",\"slug\":\"_2、多集群\",\"link\":\"#_2、多集群\",\"children\":[]},{\"level\":3,\"title\":\"2.1、配置文件:config-sample.yaml\",\"slug\":\"_2-1、配置文件-config-sample-yaml\",\"link\":\"#_2-1、配置文件-config-sample-yaml\",\"children\":[]},{\"level\":3,\"title\":\"2.2、执行安装命令：\",\"slug\":\"_2-2、执行安装命令\",\"link\":\"#_2-2、执行安装命令\",\"children\":[]},{\"level\":3,\"title\":\"2.3、控制节点配置：\",\"slug\":\"_2-3、控制节点配置\",\"link\":\"#_2-3、控制节点配置\",\"children\":[]},{\"level\":3,\"title\":\"2.4、安装成功日志\",\"slug\":\"_2-4、安装成功日志\",\"link\":\"#_2-4、安装成功日志\",\"children\":[]}]},{\"level\":2,\"title\":\"3、pod操作\",\"slug\":\"_3、pod操作\",\"link\":\"#_3、pod操作\",\"children\":[{\"level\":3,\"title\":\"3.1、强制删除pod\",\"slug\":\"_3-1、强制删除pod\",\"link\":\"#_3-1、强制删除pod\",\"children\":[]}]},{\"level\":2,\"title\":\"三、流水线安装\",\"slug\":\"三、流水线安装\",\"link\":\"#三、流水线安装\",\"children\":[{\"level\":3,\"title\":\"1、自动化部署(后端部署)\",\"slug\":\"_1、自动化部署-后端部署\",\"link\":\"#_1、自动化部署-后端部署\",\"children\":[]},{\"level\":3,\"title\":\"1.1、流水线代码\",\"slug\":\"_1-1、流水线代码\",\"link\":\"#_1-1、流水线代码\",\"children\":[]},{\"level\":3,\"title\":\"1.2、后端采用helm部署，部署的chart代码如下：\",\"slug\":\"_1-2、后端采用helm部署-部署的chart代码如下\",\"link\":\"#_1-2、后端采用helm部署-部署的chart代码如下\",\"children\":[]},{\"level\":3,\"title\":\"2、自动化部署(前端)\",\"slug\":\"_2、自动化部署-前端\",\"link\":\"#_2、自动化部署-前端\",\"children\":[]},{\"level\":3,\"title\":\"2.1、流水线代码\",\"slug\":\"_2-1、流水线代码\",\"link\":\"#_2-1、流水线代码\",\"children\":[]},{\"level\":3,\"title\":\"2.2、在 Kubernetes 中部署 Traefik Ingress Controller 可以通过 Helm 或使用 Kubernetes 清单文件来完成。以下是使用 Helm 安装 Traefik 的详细步骤：\",\"slug\":\"_2-2、在-kubernetes-中部署-traefik-ingress-controller-可以通过-helm-或使用-kubernetes-清单文件来完成。以下是使用-helm-安装-traefik-的详细步骤\",\"link\":\"#_2-2、在-kubernetes-中部署-traefik-ingress-controller-可以通过-helm-或使用-kubernetes-清单文件来完成。以下是使用-helm-安装-traefik-的详细步骤\",\"children\":[]},{\"level\":3,\"title\":\"2.2.1 前提条件\",\"slug\":\"_2-2-1-前提条件\",\"link\":\"#_2-2-1-前提条件\",\"children\":[]},{\"level\":3,\"title\":\"2.2.2 添加 Traefik Helm 仓库\",\"slug\":\"_2-2-2-添加-traefik-helm-仓库\",\"link\":\"#_2-2-2-添加-traefik-helm-仓库\",\"children\":[]}]},{\"level\":2,\"title\":\"3. 安装 Traefik\",\"slug\":\"_3-安装-traefik\",\"link\":\"#_3-安装-traefik\",\"children\":[{\"level\":3,\"title\":\"4. 验证 Traefik 是否运行\",\"slug\":\"_4-验证-traefik-是否运行\",\"link\":\"#_4-验证-traefik-是否运行\",\"children\":[]},{\"level\":3,\"title\":\"1.2、jenkins连接K8S\",\"slug\":\"_1-2、jenkins连接k8s\",\"link\":\"#_1-2、jenkins连接k8s\",\"children\":[]},{\"level\":3,\"title\":\"1、给jenkins赋创建pod的权限 jenkins-deployment-role.yaml\",\"slug\":\"_1、给jenkins赋创建pod的权限-jenkins-deployment-role-yaml\",\"link\":\"#_1、给jenkins赋创建pod的权限-jenkins-deployment-role-yaml\",\"children\":[]},{\"level\":3,\"title\":\"步骤 3: 验证权限\",\"slug\":\"步骤-3-验证权限\",\"link\":\"#步骤-3-验证权限\",\"children\":[]}]},{\"level\":2,\"title\":\"2、安装SonarQube\",\"slug\":\"_2、安装sonarqube\",\"link\":\"#_2、安装sonarqube\",\"children\":[{\"level\":3,\"title\":\"2.1、安装helm\",\"slug\":\"_2-1、安装helm\",\"link\":\"#_2-1、安装helm\",\"children\":[]},{\"level\":3,\"title\":\"2.2、添加仓库\",\"slug\":\"_2-2、添加仓库\",\"link\":\"#_2-2、添加仓库\",\"children\":[]},{\"level\":3,\"title\":\"2.3、安装SonarQube\",\"slug\":\"_2-3、安装sonarqube\",\"link\":\"#_2-3、安装sonarqube\",\"children\":[]},{\"level\":3,\"title\":\"2.4、获取 SonarQube 控制台地址\",\"slug\":\"_2-4、获取-sonarqube-控制台地址\",\"link\":\"#_2-4、获取-sonarqube-控制台地址\",\"children\":[]},{\"level\":3,\"title\":\"2.5、访问地址\",\"slug\":\"_2-5、访问地址\",\"link\":\"#_2-5、访问地址\",\"children\":[]}]},{\"level\":2,\"title\":\"3、安装Harbor\",\"slug\":\"_3、安装harbor\",\"link\":\"#_3、安装harbor\",\"children\":[{\"level\":3,\"title\":\"3.1、添加仓库\",\"slug\":\"_3-1、添加仓库\",\"link\":\"#_3-1、添加仓库\",\"children\":[]},{\"level\":3,\"title\":\"3.2、安装Harbor\",\"slug\":\"_3-2、安装harbor\",\"link\":\"#_3-2、安装harbor\",\"children\":[]},{\"level\":3,\"title\":\"3.3、启用 Insecure Registry\",\"slug\":\"_3-3、启用-insecure-registry\",\"link\":\"#_3-3、启用-insecure-registry\",\"children\":[]},{\"level\":3,\"title\":\"3.4、修改 containerd 配置文件\",\"slug\":\"_3-4、修改-containerd-配置文件\",\"link\":\"#_3-4、修改-containerd-配置文件\",\"children\":[]},{\"level\":3,\"title\":\"3.5、重启containerd\",\"slug\":\"_3-5、重启containerd\",\"link\":\"#_3-5、重启containerd\",\"children\":[]},{\"level\":3,\"title\":\"3.6、当用docker时，让jenkins内部使用宿主机的docker 推送给Harbor\",\"slug\":\"_3-6、当用docker时-让jenkins内部使用宿主机的docker-推送给harbor\",\"link\":\"#_3-6、当用docker时-让jenkins内部使用宿主机的docker-推送给harbor\",\"children\":[]}]},{\"level\":2,\"title\":\"4、安装maven\",\"slug\":\"_4、安装maven\",\"link\":\"#_4、安装maven\",\"children\":[{\"level\":3,\"title\":\"4.1、下载地址，官网：https://maven.apache.org/  历史版本地址：https://archive.apache.org/dist/maven/maven-3/\",\"slug\":\"_4-1、下载地址-官网-https-maven-apache-org-历史版本地址-https-archive-apache-org-dist-maven-maven-3\",\"link\":\"#_4-1、下载地址-官网-https-maven-apache-org-历史版本地址-https-archive-apache-org-dist-maven-maven-3\",\"children\":[]},{\"level\":3,\"title\":\"4.2、将maven放到jenkins_home里面\",\"slug\":\"_4-2、将maven放到jenkins-home里面\",\"link\":\"#_4-2、将maven放到jenkins-home里面\",\"children\":[]},{\"level\":3,\"title\":\"4.3、修改settings.xml\",\"slug\":\"_4-3、修改settings-xml\",\"link\":\"#_4-3、修改settings-xml\",\"children\":[]}]},{\"level\":2,\"title\":\"四、推荐到新的仓库\",\"slug\":\"四、推荐到新的仓库\",\"link\":\"#四、推荐到新的仓库\",\"children\":[{\"level\":3,\"title\":\"1、推送到gitlab仓库，添加用户\",\"slug\":\"_1、推送到gitlab仓库-添加用户\",\"link\":\"#_1、推送到gitlab仓库-添加用户\",\"children\":[]},{\"level\":3,\"title\":\"2、创建一个新仓库\",\"slug\":\"_2、创建一个新仓库\",\"link\":\"#_2、创建一个新仓库\",\"children\":[]},{\"level\":3,\"title\":\"3、推送现有文件夹\",\"slug\":\"_3、推送现有文件夹\",\"link\":\"#_3、推送现有文件夹\",\"children\":[]},{\"level\":3,\"title\":\"4、推送现有的 Git 仓库\",\"slug\":\"_4、推送现有的-git-仓库\",\"link\":\"#_4、推送现有的-git-仓库\",\"children\":[]}]}],\"readingTime\":{\"minutes\":16.01,\"words\":4802},\"filePathRelative\":\"posts/k8s学习/4.md\",\"excerpt\":\"<h1> 项目实现jenkins+K8S部署</h1>\\n<h2> 一、安装<a href=\\\"https://github.com/kubesphere/kubekey\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">kubekey</a></h2>\\n<div class=\\\"language-bash line-numbers-mode\\\" data-ext=\\\"sh\\\"><pre class=\\\"language-bash\\\"><code><span class=\\\"token comment\\\">#解压</span>\\n<span class=\\\"token function\\\">tar</span> <span class=\\\"token parameter variable\\\">-zxf</span> kubekey-v3.1.2-linux-amd64.tar.gz\\n<span class=\\\"token comment\\\">#将解压出来的KK放到/usr/bin</span>\\n<span class=\\\"token function\\\">mv</span> kk /usr/bin\\n<span class=\\\"token comment\\\">#安装时间同步</span>\\n<span class=\\\"token function\\\">apt</span> <span class=\\\"token function\\\">install</span> ntpdate\\n</code></pre><div class=\\\"line-numbers\\\" aria-hidden=\\\"true\\\"><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div><div class=\\\"line-number\\\"></div></div></div>\",\"autoDesc\":true}")

if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updatePageData) {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ data }) => {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  })
}
