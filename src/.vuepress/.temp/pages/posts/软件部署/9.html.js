export const data = JSON.parse("{\"key\":\"v-51202a7d\",\"path\":\"/posts/%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2/9.html\",\"title\":\"用docker安装K8S\",\"lang\":\"zh-CN\",\"frontmatter\":{\"cover\":\"/assets/images/cover2.jpg\",\"icon\":\"pen-to-square\",\"date\":\"2024-06-14T00:00:00.000Z\",\"category\":[\"K8S\"],\"tag\":[\"k8s\",\"微服务\"],\"star\":true,\"sticky\":true,\"description\":\"用docker安装K8S 基础设置 1、设置主机名 hostnamectl set-hostname 主机名称 2、同步hosts文件\",\"head\":[[\"meta\",{\"property\":\"og:url\",\"content\":\"https://github.com/posts/%E8%BD%AF%E4%BB%B6%E9%83%A8%E7%BD%B2/9.html\"}],[\"meta\",{\"property\":\"og:title\",\"content\":\"用docker安装K8S\"}],[\"meta\",{\"property\":\"og:description\",\"content\":\"用docker安装K8S 基础设置 1、设置主机名 hostnamectl set-hostname 主机名称 2、同步hosts文件\"}],[\"meta\",{\"property\":\"og:type\",\"content\":\"article\"}],[\"meta\",{\"property\":\"og:image\",\"content\":\"https://github.com/assets/images/cover2.jpg\"}],[\"meta\",{\"property\":\"og:locale\",\"content\":\"zh-CN\"}],[\"meta\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"meta\",{\"name\":\"twitter:image:alt\",\"content\":\"用docker安装K8S\"}],[\"meta\",{\"property\":\"article:author\",\"content\":\"蜉蝣\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"k8s\"}],[\"meta\",{\"property\":\"article:tag\",\"content\":\"微服务\"}],[\"meta\",{\"property\":\"article:published_time\",\"content\":\"2024-06-14T00:00:00.000Z\"}],[\"script\",{\"type\":\"application/ld+json\"},\"{\\\"@context\\\":\\\"https://schema.org\\\",\\\"@type\\\":\\\"Article\\\",\\\"headline\\\":\\\"用docker安装K8S\\\",\\\"image\\\":[\\\"https://github.com/assets/images/cover2.jpg\\\"],\\\"datePublished\\\":\\\"2024-06-14T00:00:00.000Z\\\",\\\"dateModified\\\":null,\\\"author\\\":[{\\\"@type\\\":\\\"Person\\\",\\\"name\\\":\\\"蜉蝣\\\",\\\"url\\\":\\\"https://mister-hope.com\\\"}]}\"]]},\"headers\":[{\"level\":2,\"title\":\"基础设置\",\"slug\":\"基础设置\",\"link\":\"#基础设置\",\"children\":[{\"level\":3,\"title\":\"1、设置主机名\",\"slug\":\"_1、设置主机名\",\"link\":\"#_1、设置主机名\",\"children\":[]},{\"level\":3,\"title\":\"2、同步hosts文件\",\"slug\":\"_2、同步hosts文件\",\"link\":\"#_2、同步hosts文件\",\"children\":[]},{\"level\":3,\"title\":\"3、防火墙关闭\",\"slug\":\"_3、防火墙关闭\",\"link\":\"#_3、防火墙关闭\",\"children\":[]},{\"level\":3,\"title\":\"4、关闭 SELINUX\",\"slug\":\"_4、关闭-selinux\",\"link\":\"#_4、关闭-selinux\",\"children\":[]},{\"level\":3,\"title\":\"5、关闭swap分区\",\"slug\":\"_5、关闭swap分区\",\"link\":\"#_5、关闭swap分区\",\"children\":[]},{\"level\":3,\"title\":\"6、同步时间，让每个节点在同一个时间下\",\"slug\":\"_6、同步时间-让每个节点在同一个时间下\",\"link\":\"#_6、同步时间-让每个节点在同一个时间下\",\"children\":[]},{\"level\":3,\"title\":\"7、安装ipset、ipvsadm\",\"slug\":\"_7、安装ipset、ipvsadm\",\"link\":\"#_7、安装ipset、ipvsadm\",\"children\":[]},{\"level\":3,\"title\":\"8、写入配置文件中\",\"slug\":\"_8、写入配置文件中\",\"link\":\"#_8、写入配置文件中\",\"children\":[]},{\"level\":3,\"title\":\"9、启动模块\",\"slug\":\"_9、启动模块\",\"link\":\"#_9、启动模块\",\"children\":[]},{\"level\":3,\"title\":\"10、查看模块是否启动成功\",\"slug\":\"_10、查看模块是否启动成功\",\"link\":\"#_10、查看模块是否启动成功\",\"children\":[]},{\"level\":3,\"title\":\"11、添加网桥过滤及内核转发配置文件\",\"slug\":\"_11、添加网桥过滤及内核转发配置文件\",\"link\":\"#_11、添加网桥过滤及内核转发配置文件\",\"children\":[]},{\"level\":3,\"title\":\"12、加载br_netfilter模块\",\"slug\":\"_12、加载br-netfilter模块\",\"link\":\"#_12、加载br-netfilter模块\",\"children\":[]},{\"level\":3,\"title\":\"13、更新配置文件\",\"slug\":\"_13、更新配置文件\",\"link\":\"#_13、更新配置文件\",\"children\":[]},{\"level\":3,\"title\":\"14、查看是否加载\",\"slug\":\"_14、查看是否加载\",\"link\":\"#_14、查看是否加载\",\"children\":[]},{\"level\":3,\"title\":\"15、使其生效\",\"slug\":\"_15、使其生效\",\"link\":\"#_15、使其生效\",\"children\":[]},{\"level\":3,\"title\":\"升级Linux内核\",\"slug\":\"升级linux内核\",\"link\":\"#升级linux内核\",\"children\":[]},{\"level\":3,\"title\":\"1、导入elrepo gpg key\",\"slug\":\"_1、导入elrepo-gpg-key\",\"link\":\"#_1、导入elrepo-gpg-key\",\"children\":[]},{\"level\":3,\"title\":\"2、安装elrepo yum源仓库\",\"slug\":\"_2、安装elrepo-yum源仓库\",\"link\":\"#_2、安装elrepo-yum源仓库\",\"children\":[]},{\"level\":3,\"title\":\"3、安装kernel-ml版本,ml为长期稳定版本，lt为长期维护版本\",\"slug\":\"_3、安装kernel-ml版本-ml为长期稳定版本-lt为长期维护版本\",\"link\":\"#_3、安装kernel-ml版本-ml为长期稳定版本-lt为长期维护版本\",\"children\":[]},{\"level\":3,\"title\":\"4、设置grub2默认引导为0\",\"slug\":\"_4、设置grub2默认引导为0\",\"link\":\"#_4、设置grub2默认引导为0\",\"children\":[]},{\"level\":3,\"title\":\"5、重新生成grub2引导文件\",\"slug\":\"_5、重新生成grub2引导文件\",\"link\":\"#_5、重新生成grub2引导文件\",\"children\":[]},{\"level\":3,\"title\":\"6、更新后重启系统\",\"slug\":\"_6、更新后重启系统\",\"link\":\"#_6、更新后重启系统\",\"children\":[]},{\"level\":3,\"title\":\"7、查看内核\",\"slug\":\"_7、查看内核\",\"link\":\"#_7、查看内核\",\"children\":[]},{\"level\":3,\"title\":\"安装docker-ce和cri-dockerd\",\"slug\":\"安装docker-ce和cri-dockerd\",\"link\":\"#安装docker-ce和cri-dockerd\",\"children\":[]}]},{\"level\":2,\"title\":\"安装k8s\",\"slug\":\"安装k8s\",\"link\":\"#安装k8s\",\"children\":[{\"level\":3,\"title\":\"1、kubernetes yum源准备\",\"slug\":\"_1、kubernetes-yum源准备\",\"link\":\"#_1、kubernetes-yum源准备\",\"children\":[]},{\"level\":3,\"title\":\"2、查看有没有要安装的软件\",\"slug\":\"_2、查看有没有要安装的软件\",\"link\":\"#_2、查看有没有要安装的软件\",\"children\":[]},{\"level\":3,\"title\":\"3、默认安装\",\"slug\":\"_3、默认安装\",\"link\":\"#_3、默认安装\",\"children\":[]},{\"level\":3,\"title\":\"4、安装指定版本\",\"slug\":\"_4、安装指定版本\",\"link\":\"#_4、安装指定版本\",\"children\":[]},{\"level\":3,\"title\":\"5、配置kubelet\",\"slug\":\"_5、配置kubelet\",\"link\":\"#_5、配置kubelet\",\"children\":[]},{\"level\":3,\"title\":\"6、设置kubelet为开机自启动，由于没有生成配置文件，集群初始化后自动启动\",\"slug\":\"_6、设置kubelet为开机自启动-由于没有生成配置文件-集群初始化后自动启动\",\"link\":\"#_6、设置kubelet为开机自启动-由于没有生成配置文件-集群初始化后自动启动\",\"children\":[]},{\"level\":3,\"title\":\"7、集群镜像准备\",\"slug\":\"_7、集群镜像准备\",\"link\":\"#_7、集群镜像准备\",\"children\":[]},{\"level\":3,\"title\":\"8、镜像下载，当出现两个容器运行时时，要在后面加--cri-socket unix:///var/run/cri-dockerd.sock 指定容器\",\"slug\":\"_8、镜像下载-当出现两个容器运行时时-要在后面加-cri-socket-unix-var-run-cri-dockerd-sock-指定容器\",\"link\":\"#_8、镜像下载-当出现两个容器运行时时-要在后面加-cri-socket-unix-var-run-cri-dockerd-sock-指定容器\",\"children\":[]},{\"level\":3,\"title\":\"9、master节点集群初始化\",\"slug\":\"_9、master节点集群初始化\",\"link\":\"#_9、master节点集群初始化\",\"children\":[]},{\"level\":3,\"title\":\"10、清除配置\",\"slug\":\"_10、清除配置\",\"link\":\"#_10、清除配置\",\"children\":[]},{\"level\":3,\"title\":\"11、将工作节点连接主节点的秘钥\",\"slug\":\"_11、将工作节点连接主节点的秘钥\",\"link\":\"#_11、将工作节点连接主节点的秘钥\",\"children\":[]},{\"level\":3,\"title\":\"12、node节点或其他控制平面节点加入集群时，\",\"slug\":\"_12、node节点或其他控制平面节点加入集群时\",\"link\":\"#_12、node节点或其他控制平面节点加入集群时\",\"children\":[]},{\"level\":3,\"title\":\"13、设置操作权限\",\"slug\":\"_13、设置操作权限\",\"link\":\"#_13、设置操作权限\",\"children\":[]},{\"level\":3,\"title\":\"14、token 过期解决办法\",\"slug\":\"_14、token-过期解决办法\",\"link\":\"#_14、token-过期解决办法\",\"children\":[]},{\"level\":3,\"title\":\"15、证书密钥的获取方式\",\"slug\":\"_15、证书密钥的获取方式\",\"link\":\"#_15、证书密钥的获取方式\",\"children\":[]},{\"level\":3,\"title\":\"16、部署网络插件calico\",\"slug\":\"_16、部署网络插件calico\",\"link\":\"#_16、部署网络插件calico\",\"children\":[]},{\"level\":3,\"title\":\"16.1、(离线安装)下载网络插件容器包  https://github.com/projectcalico/calico/releases 下载release-v3.27.2.tgz 这个是专门给容器使用的\",\"slug\":\"_16-1、-离线安装-下载网络插件容器包-https-github-com-projectcalico-calico-releases-下载release-v3-27-2-tgz-这个是专门给容器使用的\",\"link\":\"#_16-1、-离线安装-下载网络插件容器包-https-github-com-projectcalico-calico-releases-下载release-v3-27-2-tgz-这个是专门给容器使用的\",\"children\":[]},{\"level\":3,\"title\":\"17、下载kubectl create -f https://raw.githubusercontent.com/projectcalico/calico/v3.27.2/manifests/custom-resources.yaml\",\"slug\":\"_17、下载kubectl-create-f-https-raw-githubusercontent-com-projectcalico-calico-v3-27-2-manifests-custom-resources-yaml\",\"link\":\"#_17、下载kubectl-create-f-https-raw-githubusercontent-com-projectcalico-calico-v3-27-2-manifests-custom-resources-yaml\",\"children\":[]}]},{\"level\":2,\"title\":\"pod基本操作\",\"slug\":\"pod基本操作\",\"link\":\"#pod基本操作\",\"children\":[{\"level\":3,\"title\":\"1、查看所有的命名空间\",\"slug\":\"_1、查看所有的命名空间\",\"link\":\"#_1、查看所有的命名空间\",\"children\":[]},{\"level\":3,\"title\":\"2、查看指定的命名空间\",\"slug\":\"_2、查看指定的命名空间\",\"link\":\"#_2、查看指定的命名空间\",\"children\":[]},{\"level\":3,\"title\":\"3、查看命名空间下pod的详细信息\",\"slug\":\"_3、查看命名空间下pod的详细信息\",\"link\":\"#_3、查看命名空间下pod的详细信息\",\"children\":[]},{\"level\":3,\"title\":\"4、查看所有的命名空间下pod的详细信息\",\"slug\":\"_4、查看所有的命名空间下pod的详细信息\",\"link\":\"#_4、查看所有的命名空间下pod的详细信息\",\"children\":[]},{\"level\":3,\"title\":\"5、实时监控pod的状态\",\"slug\":\"_5、实时监控pod的状态\",\"link\":\"#_5、实时监控pod的状态\",\"children\":[]},{\"level\":3,\"title\":\"6、创建pod\",\"slug\":\"_6、创建pod\",\"link\":\"#_6、创建pod\",\"children\":[]},{\"level\":3,\"title\":\"6.1、以 YAML文件创建pod\",\"slug\":\"_6-1、以-yaml文件创建pod\",\"link\":\"#_6-1、以-yaml文件创建pod\",\"children\":[]},{\"level\":3,\"title\":\"7、删除 Pod\",\"slug\":\"_7、删除-pod\",\"link\":\"#_7、删除-pod\",\"children\":[]},{\"level\":3,\"title\":\"8、执行 YAML文件\",\"slug\":\"_8、执行-yaml文件\",\"link\":\"#_8、执行-yaml文件\",\"children\":[]},{\"level\":3,\"title\":\"9、进入pod\",\"slug\":\"_9、进入pod\",\"link\":\"#_9、进入pod\",\"children\":[]},{\"level\":3,\"title\":\"10、查看pod日志\",\"slug\":\"_10、查看pod日志\",\"link\":\"#_10、查看pod日志\",\"children\":[]},{\"level\":3,\"title\":\"11、查看pod资源使用情况\",\"slug\":\"_11、查看pod资源使用情况\",\"link\":\"#_11、查看pod资源使用情况\",\"children\":[]},{\"level\":3,\"title\":\"12、查看pod标签\",\"slug\":\"_12、查看pod标签\",\"link\":\"#_12、查看pod标签\",\"children\":[]},{\"level\":3,\"title\":\"13、选择一个节点，给它添加一个标签\",\"slug\":\"_13、选择一个节点-给它添加一个标签\",\"link\":\"#_13、选择一个节点-给它添加一个标签\",\"children\":[]}]},{\"level\":2,\"title\":\"容器的基本操作\",\"slug\":\"容器的基本操作\",\"link\":\"#容器的基本操作\",\"children\":[{\"level\":3,\"title\":\"1、容器生命周期和回调\",\"slug\":\"_1、容器生命周期和回调\",\"link\":\"#_1、容器生命周期和回调\",\"children\":[]},{\"level\":3,\"title\":\"安装 metrics-server-0.6.4 （安装不了也没有关系，可视化工具可以解决）\",\"slug\":\"安装-metrics-server-0-6-4-安装不了也没有关系-可视化工具可以解决\",\"link\":\"#安装-metrics-server-0-6-4-安装不了也没有关系-可视化工具可以解决\",\"children\":[]},{\"level\":3,\"title\":\"1、下载地址：kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.6.4/components.yaml\",\"slug\":\"_1、下载地址-kubectl-apply-f-https-github-com-kubernetes-sigs-metrics-server-releases-download-v0-6-4-components-yaml\",\"link\":\"#_1、下载地址-kubectl-apply-f-https-github-com-kubernetes-sigs-metrics-server-releases-download-v0-6-4-components-yaml\",\"children\":[]},{\"level\":3,\"title\":\"2、修改成国内镜像\",\"slug\":\"_2、修改成国内镜像\",\"link\":\"#_2、修改成国内镜像\",\"children\":[]},{\"level\":3,\"title\":\"3、安装metrics-server\",\"slug\":\"_3、安装metrics-server\",\"link\":\"#_3、安装metrics-server\",\"children\":[]},{\"level\":3,\"title\":\"4、查看是否在运行\",\"slug\":\"_4、查看是否在运行\",\"link\":\"#_4、查看是否在运行\",\"children\":[]},{\"level\":3,\"title\":\"5、查看pod状态的变化\",\"slug\":\"_5、查看pod状态的变化\",\"link\":\"#_5、查看pod状态的变化\",\"children\":[]}]},{\"level\":2,\"title\":\"deployment控制器\",\"slug\":\"deployment控制器\",\"link\":\"#deployment控制器\",\"children\":[{\"level\":3,\"title\":\"1、deployment第一个示例\",\"slug\":\"_1、deployment第一个示例\",\"link\":\"#_1、deployment第一个示例\",\"children\":[]},{\"level\":3,\"title\":\"2、查看deployment\",\"slug\":\"_2、查看deployment\",\"link\":\"#_2、查看deployment\",\"children\":[]},{\"level\":3,\"title\":\"3、deployment相关命令\",\"slug\":\"_3、deployment相关命令\",\"link\":\"#_3、deployment相关命令\",\"children\":[]},{\"level\":3,\"title\":\"4、扩缩deployment\",\"slug\":\"_4、扩缩deployment\",\"link\":\"#_4、扩缩deployment\",\"children\":[]},{\"level\":3,\"title\":\"5、回滚deployment\",\"slug\":\"_5、回滚deployment\",\"link\":\"#_5、回滚deployment\",\"children\":[]},{\"level\":3,\"title\":\"6、删除deployment\",\"slug\":\"_6、删除deployment\",\"link\":\"#_6、删除deployment\",\"children\":[]},{\"level\":3,\"title\":\"7、下面是一个 Deployment 示例。其中创建了一个 ReplicaSet，负责启动三个 nginx Pod\",\"slug\":\"_7、下面是一个-deployment-示例。其中创建了一个-replicaset-负责启动三个-nginx-pod\",\"link\":\"#_7、下面是一个-deployment-示例。其中创建了一个-replicaset-负责启动三个-nginx-pod\",\"children\":[]}]},{\"level\":2,\"title\":\"用docker安装Kuboard(可视化工具)\",\"slug\":\"用docker安装kuboard-可视化工具\",\"link\":\"#用docker安装kuboard-可视化工具\",\"children\":[{\"level\":3,\"title\":\"1、创建docker-compose.yml\",\"slug\":\"_1、创建docker-compose-yml\",\"link\":\"#_1、创建docker-compose-yml\",\"children\":[]}]},{\"level\":2,\"title\":\"statefulSet控制器\",\"slug\":\"statefulset控制器\",\"link\":\"#statefulset控制器\",\"children\":[{\"level\":3,\"title\":\"1、搭建NFS服务，创建新的系统安装\",\"slug\":\"_1、搭建nfs服务-创建新的系统安装\",\"link\":\"#_1、搭建nfs服务-创建新的系统安装\",\"children\":[]},{\"level\":3,\"title\":\"2、安装客户端（在K8S所有的节点安装）\",\"slug\":\"_2、安装客户端-在k8s所有的节点安装\",\"link\":\"#_2、安装客户端-在k8s所有的节点安装\",\"children\":[]},{\"level\":3,\"title\":\"3、下面的示例演示了 StatefulSet 的组件\",\"slug\":\"_3、下面的示例演示了-statefulset-的组件\",\"link\":\"#_3、下面的示例演示了-statefulset-的组件\",\"children\":[]},{\"level\":3,\"title\":\"4、安装nfs-subdir-external-provisioner\",\"slug\":\"_4、安装nfs-subdir-external-provisioner\",\"link\":\"#_4、安装nfs-subdir-external-provisioner\",\"children\":[]}]},{\"level\":2,\"title\":\"daemonset 控制器\",\"slug\":\"daemonset-控制器\",\"link\":\"#daemonset-控制器\",\"children\":[{\"level\":3,\"title\":\"1、创建一个实例\",\"slug\":\"_1、创建一个实例\",\"link\":\"#_1、创建一个实例\",\"children\":[]},{\"level\":3,\"title\":\"2、基于 YAML 文件创建 DaemonSet：\",\"slug\":\"_2、基于-yaml-文件创建-daemonset\",\"link\":\"#_2、基于-yaml-文件创建-daemonset\",\"children\":[]},{\"level\":3,\"title\":\"3、Job\",\"slug\":\"_3、job\",\"link\":\"#_3、job\",\"children\":[]}]},{\"level\":2,\"title\":\"helm方式部署rancher\",\"slug\":\"helm方式部署rancher\",\"link\":\"#helm方式部署rancher\",\"children\":[{\"level\":3,\"title\":\"helm 安装\",\"slug\":\"helm-安装\",\"link\":\"#helm-安装\",\"children\":[]},{\"level\":3,\"title\":\"1、官网:https://github.com/helm/helm/releases\",\"slug\":\"_1、官网-https-github-com-helm-helm-releases\",\"link\":\"#_1、官网-https-github-com-helm-helm-releases\",\"children\":[]},{\"level\":3,\"title\":\"2、解压(tar -zxvf helm-v3.0.0-linux-amd64.tar.gz)\",\"slug\":\"_2、解压-tar-zxvf-helm-v3-0-0-linux-amd64-tar-gz\",\"link\":\"#_2、解压-tar-zxvf-helm-v3-0-0-linux-amd64-tar-gz\",\"children\":[]},{\"level\":3,\"title\":\"3、在解压目录中找到helm程序，移动到需要的目录中(mv linux-amd64/helm /usr/local/bin/helm)\",\"slug\":\"_3、在解压目录中找到helm程序-移动到需要的目录中-mv-linux-amd64-helm-usr-local-bin-helm\",\"link\":\"#_3、在解压目录中找到helm程序-移动到需要的目录中-mv-linux-amd64-helm-usr-local-bin-helm\",\"children\":[]},{\"level\":3,\"title\":\"部署rancher\",\"slug\":\"部署rancher\",\"link\":\"#部署rancher\",\"children\":[]},{\"level\":3,\"title\":\"1、修改代理模式\",\"slug\":\"_1、修改代理模式\",\"link\":\"#_1、修改代理模式\",\"children\":[]},{\"level\":3,\"title\":\"2、修改代码：\",\"slug\":\"_2、修改代码\",\"link\":\"#_2、修改代码\",\"children\":[]},{\"level\":3,\"title\":\"3、重启代理\",\"slug\":\"_3、重启代理\",\"link\":\"#_3、重启代理\",\"children\":[]},{\"level\":3,\"title\":\"4、安装MetalLB\",\"slug\":\"_4、安装metallb\",\"link\":\"#_4、安装metallb\",\"children\":[]},{\"level\":3,\"title\":\"5、安装ingress-nginx代理服务器\",\"slug\":\"_5、安装ingress-nginx代理服务器\",\"link\":\"#_5、安装ingress-nginx代理服务器\",\"children\":[]}]}],\"readingTime\":{\"minutes\":15.68,\"words\":4704},\"filePathRelative\":\"posts/软件部署/9.md\",\"localizedDate\":\"2024年6月14日\",\"excerpt\":\"<h1> 用docker安装K8S</h1>\\n<h2> 基础设置</h2>\\n<h3> 1、设置主机名</h3>\\n<div class=\\\"language-bash line-numbers-mode\\\" data-ext=\\\"sh\\\"><pre class=\\\"language-bash\\\"><code>hostnamectl set-hostname 主机名称\\n</code></pre><div class=\\\"line-numbers\\\" aria-hidden=\\\"true\\\"><div class=\\\"line-number\\\"></div></div></div><h3> 2、同步hosts文件</h3>\",\"autoDesc\":true}")

if (import.meta.webpackHot) {
  import.meta.webpackHot.accept()
  if (__VUE_HMR_RUNTIME__.updatePageData) {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  }
}

if (import.meta.hot) {
  import.meta.hot.accept(({ data }) => {
    __VUE_HMR_RUNTIME__.updatePageData(data)
  })
}
